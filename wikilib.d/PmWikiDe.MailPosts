version=pmwiki-2.2.0-beta15 ordered=1 urlencoded=1
agent=Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727)
author=Stephan Schwarzbold
csum=
host=141.54.174.156
name=PmWikiDe.MailPosts
rev=14
targets=PmWiki.MailPosts,PmWikiDe.Notify,Profiles.StephanSchwarzbold,PmWikiDe.Variables,PmWikiDe.DocumentationIndex
text=(:title E-Mail Nachricht bei geänderten Seiten:)%0a%0a%0a%25green%25[--(deutsche Übersetzung der Seite [[PmWiki/MailPosts]], Stand 2006-10-17 --]%0a%0a%0a%25red%25Nach Aussagen der aktuellen englishen Seite wurde mailposts ab der Version 2.1.7 durch [[notify]] ersetzt, welches eine bessere und umfangreichere Funktionalität hat. Dieses Script ist jedoch in allen aktuellen Versionen (bis 2.2.0) noch enthalten und kann weiterhin eingesetzt werden. --[[~Stephan Schwarzbold]] 17.10.2006 21:55 Uhr%0a%0a%0aDie Scripteinstellungen in der Datei ''mailposts.php'' macht es dem Administrator möglich PmWiki so zu konfigurieren, das es per E-Mail über Änderungen der Seite informiert. Dabei kann MailPosts so eingestellt werden, dass es mehere Seitenänderungen innerhalb kürzester Zeit in einer Mail zusammenfasst, damit das Zielpostfach nicht überläuft.%0a%0aDurch die E-Mail-Benachrichtigung ist es (besonders bei unregelmäßig aktualisierten Seiten) nicht mehr notwendig regelmäßig die RecentChanges auf Änderungen auf der Seite zu überprüfen.%0a%0aAlle Einstellungsparameter stehen in ''scripts/mailposts.php''.\\%0aFolgende Einstellungen müssen jedoch in der ''config.php'' bzw. in dem jeweiligen Script der Gruppe eingetragen werden:%0a%0a $EnableMailPosts=1;                   # aktivieren von mailposts%0a $MailPostsTo="mail@example.com";      # Zieladresse der Benachrichtigung %0a $MailPostsDelay=1800;                 # 30+ min Sendeverzögerung (in Sek.)%0a $MailPostsSquelch=7200;               # mindestens 2+ Stunden zw. den Mails (in Sek.)%0a%0a'''ERKLÄRUNGEN:'''%0a%0a $MailPostsTo%0aFür den Fall, dass die Benachrichtigung an mehrere Empfänger gesendet werden soll, müssen die Adressen mit Komma getrennt werden.%0a%0a $MailPostsDelay%0aNach einem Posting ist es häufig der Fall, dass der Autor noch kleinere Korrekturen an seinem Text vornimmt. Deswegen ist es sinnvoll eine gewisse Zeit nach der letzten Änderung verstreichen zu lassen, bevor die Benachrichtigung gesendet wird.\\%0aDie variable  $MailPostsDelay gibt also an, welche Zeit (in Sekunden) '''mindestens''' verstreichen muss, damit die Mail gesendet wird. Eine weitere Änderung in dieser Zeitspanne wird dieser Benachrichtigungsmail angehängt.\\%0aDabei ist zu beachten, dass die Mail erst mit dem nächsten Aufruf der ''pmwiki.php'' nach verstreichen der Zeit versendet werden kann (bei selten besuchten Seiten kann demnach der Versand stark verzögert sein).\\%0aEine Zeiteinstellung von Null(0) hat das sofortige versenden der Mail nach einer Änderung zur Folge.%0a%0a%0a$MailPostsSquelch%0aBeschreibt die Mindestzeitspanne zwischen zwei Benachrichtigungsmails. Diese Variablen kann eingesetzt werden, damit bei geringer Wartezeit durch $MailPostsDelay und einer hohen Änderungsfrequenz, nicht unnötig viele Mails verschickt werden.%0a%0aDie Standarteinstellungen für $MailPostsDelay und $MailPostsSquelch sind 0 und 7200. mit diesen Einstellungen wird über eine Seitenänderung sofort informiert, jedoch die zu erwartenden kleineren Änderungen werden gesammelt und nach 2h versendet.%0a%0aDie einsetzbaren Variablen zur Beieinflussung von MailPosts stehen [[#variables | unten]] und in ''mailposts.php'' auf Englisch.%0a%0a!!!Wichtig für MS Windows Installationen%0a%0aOftmals sind die [[http://www.php.net/mail | Mail]]-Funktionen von PHP-Engines auf Windowssystemen nicht korrekt konfiguriert. In diesen Fällen muss in die ''config.php'' folgende Zeile eingefügt werden:%0a%0a    ini_set('SMTP','smtp.server.com');%0a%0aDabei ist ''smtp.server.com'' die Adresse des versendenden Mailservers.%0a%0a%0a%0a!!![[#variables]] MailPosts Variablen%0a%0a%25trail%25%3c%3c|[[Variables]]|>>%0a%0a:$EnableMailPosts:Ruft ''stdconfig.php'' auf, um das MailPosts Script abzuarbeiten.%0a        $EnableMailPosts = 1;          # aktiviert mailposts%0a        $EnableMailPosts = 0;          # daktiviert mailposts%0a%0a:$MailPostsTo:Eine durch Komma getrennte Liste der Mail-Empfänger.%0a        $MailPostsTo = 'admin@example.com, joe@somewhere.org';%0a%0a:$MailPostsFrom:Die Antwortadresse, welche in der Mail eingetragen wird.%0a        $MailPostsFrom = 'wiki@example.com';%0a        $MailPostsFrom = 'Wiki server %3cwiki@example.com>';%0a%0a:$MailPostsDelay:Die Zeitspanne (in Sekunden), welche gewartet wird, bis die Benachrichtungsmail gesendet wird. Dabei werden alle bis dahin vorgenommenen Änderungen angehängt. Voreinstellung ist Null(0)\\%0aDie Nachricht wird jedoch erst versendet, wenn $MailPostsSquelch ebenfalls abegelaufen ist.%0a        $MailPostsDelay = 360;    # sendet 6+ min nach dem ersten Posting%0a%0a:$MailPostsSquelch:Die Mindestzeitspanne (in Sekunden), welche vergehen muss, bevor die Nächste Benachrichtigung versendet wird. Dies kann eingesetzt werden um bei Änderung schnell informiert zu werden, ohne jedoch bei jeder darauffolgenden unbedeutenden Änderung ebenfalls informiert zu werden. Die Anfallenden Änderungen werden mit der Nächsten Mail versendet. Voreinstellung ist 7200 (2h).%0a        $MailPostsDelay = 43200;  # wartet 12+h zwischen zwei Mails%0a%0a:$MailPostsItemFmt:Der zu jeder Änderung gehörende, zu sendende Text.  Die Variable "$PostTime" wird mit dem Datum und der Zeit des Postings ersetzt. (gesteuert von $MailPostsTimeFmt (unten)).%0a        # Voreinstellung:%0a        $MailPostsItemFmt = ' * $PageName . . . $PostTime by $Author';%0a        # Einfügen der URL (Adresse) in die Benachrichtigung:%0a        $MailPostsItemFmt = '$PageName . . . $PostTime von $Author $PageUrl';%0a%0a:$MailPostsTimeFmt:Das Datums- und Uhrzeitformat für $PostTime von oben.  Die Voreinstellung ist die Formatierung von $TimeFmt.%0a        $MailPostsTimeFmt = '%25Y-%25m-%25d %25H:%25M';  # 2004-03-20 17:44%0a%0a:$MailPostsMessage:Der zu sendende Textkörper.  Die Variable "$MailPostsList" wird ersetzt durch die Liste der Postings (welche durch $MailPostsItemFmt (oben) formatiert ist).%0a%0a:$MailPostsSubject:Die Betreffzeile der Mail.%0a%0a:$MailPostsHeaders:String für die extra einzufügende E-Mail-Header Zeilen für die mail()-Funktion von PHP.%0a%0a:$MailPostsFunction:Name der Funktion, die Aufgerufen werden soll um die Mail zu versenden.  Als Voreinstellung wird die Standart-@@[[http://www.php.net/mail | mail()]]@@-Funtion von PHP genutzt, jedoch ist diese nicht auf allen Systemen korrekt implementiert.  Diese Variable kann auf [='MailPostsSendmail'=] gestellt werden. Diese Funktion liegt in: ''/usr/lib/sendmail''. Der Aufruf lautet:%0a        %0a        # call /usr/lib/sendmail directly instead of using mail()%0a        $MailPostsFunction = [='MailPostsSendmail'=];%0a%0a:$MailPostsFile:Die Datei, in der MailPosts die Liste der erfolgten Änderungen ablegt.  Standart ist: @@[="$WikiDir/.mailposts"=]@@.\\%0aBeachte, dass die Datei änderbar für Webserver-Prozesse sein muss.%0a%0a%0a%0a%25green%25Der Seitenaufbau ist noch nicht ganz glücklich und sollte evtl. nocheinmal überdacht werden. Die Seite ist auch nicht mit aktuellen Version der englischen Seite abgeglichen.%25%25%0a[[~Stephan Schwarzbold]] 08.11.2005 09:17 Uhr%0a%0a%25trail%25%3c%3c|[[DocumentationIndex | Dokumentationsindex]]|>>
time=1161140108
title=E-Mail Nachricht bei geänderten Seiten
